(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,n){},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(43),a=n.n(i),o=(n(49),n(2)),s=n(44),u=n.n(s),l=n(22),d=n(13),j=(n(79),n(0));var f=function(e){return Object(j.jsxs)("div",{id:"title",style:{fontSize:"".concat(e.size),textAlign:"".concat(e.align)},children:[Object(j.jsx)("span",{"data-content":"s",className:"title-span",style:{color:"red"},children:"s"}),Object(j.jsx)("span",{"data-content":"k",className:"title-span",style:{color:"orangered"},children:"k"}),Object(j.jsx)("span",{"data-content":"r",className:"title-span",style:{color:"yellow"},children:"r"}),Object(j.jsx)("span",{"data-content":"i",className:"title-span",style:{color:"green"},children:"i"}),Object(j.jsx)("span",{"data-content":"b",className:"title-span",style:{color:"skyblue"},children:"b"}),Object(j.jsx)("span",{"data-content":"b",className:"title-span",style:{color:"blue"},children:"b"}),Object(j.jsx)("span",{"data-content":"l",className:"title-span",style:{color:"purple"},children:"l"})]})},b=Object(r.createContext)(),h=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(j.jsx)(b.Provider,{value:[c,i],children:e.children})},O=Object(r.createContext)(),x=function(e){var t=Object(r.useState)({id:"",username:""}),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(j.jsx)(O.Provider,{value:[c,i],children:e.children})};var v=function(e){var t=e.setGame,n=e.socketRef,c=(e.wait,e.setWait,Object(r.useContext)(O)),i=Object(o.a)(c,2),a=i[0],s=i[1],u=Object(r.useContext)(b),h=Object(o.a)(u,2),x=(h[0],h[1]),v=Object(r.useState)(""),m=Object(o.a)(v,2),w=m[0],p=m[1],g=function(e){""!==a.username?n.current.emit("join",a,(function(e){e.error?p(e.error):(p(""),t(!0),x(e.allUsers))})):p("Fill up the details!")};return Object(j.jsxs)("div",{className:"outer-container",children:[Object(j.jsx)(f,{size:"15vw",stroke:"0.4vw",align:"center"}),Object(j.jsx)("div",{className:"form-container",children:Object(j.jsxs)("div",{id:"login-form",children:[Object(j.jsx)("input",{id:"username",autoComplete:"off",className:"mt-10",type:"text",placeholder:"Username",name:"username",onChange:function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(l.a)({},n,r))}))},onKeyPress:function(e){return"Enter"===e.code?g():null},value:a.username}),Object(j.jsx)("button",{id:"play",className:"mt-10",onClick:g,children:"Join"}),w?Object(j.jsx)("p",{id:"error",children:w}):null]})})]})},m=n(9),w=(n(81),n(82),n(83),n(12)),p=n(10);var g=function(e){var t=e.user,n=e.details,r=e.drawerId;return Object(j.jsxs)("div",{className:"card-container",children:[Object(j.jsx)("h3",{id:"user-name",children:t.username+(n.username===t.username?" (You)":"")}),t.id===r?Object(j.jsx)(w.a,{icon:p.c}):null,Object(j.jsx)("h3",{id:"user-score",children:t.score})]})};var y=function(e){var t=e.users,n=e.user,r=e.drawerId;return Object(j.jsx)("div",{className:"scores-container",children:t.map((function(e,t){return Object(j.jsx)(g,{index:t,user:e,details:n,drawerId:r},t)}))})},C=Object(r.createContext)(),N=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(j.jsx)(C.Provider,{value:[c,i],children:e.children})};n(88);var k=function(e){var t=e.socketRef,n=Object(r.useState)(""),c=Object(o.a)(n,2),i=c[0],a=c[1],s=Object(r.useContext)(C),u=Object(o.a)(s,2),l=u[0],d=(u[1],Object(r.useRef)(null));Object(r.useEffect)((function(){d.current&&(d.current.scrollTop=d.current.scrollHeight)}),[l]);var f=function(e){return Object(j.jsxs)("span",{style:{fontWeight:"800"},children:[" ",e," : "]})};return Object(j.jsxs)("div",{className:"guess-container",children:[Object(j.jsx)("div",{ref:d,className:"guess-list",children:l.map((function(e,t){var n=t%2===0?"#E8E8E8":"#C8C8C8";return Object(j.jsxs)("p",{style:{color:"".concat(e.color),backgroundColor:n,margin:"0",padding:"10px",overflowWrap:"break-word",transition:"0.5s ease"},children:[" ",e.sender?f(e.sender):null," ",Object(j.jsx)("span",{children:e.message})," "]},t)}))}),Object(j.jsx)("div",{className:"input-container",children:Object(j.jsx)("input",{className:"guess-input",type:"text",placeholder:"Type your guess ...",onChange:function(e){a(e.target.value.toLowerCase())},onKeyPress:function(e){13===e.which&&i.length>0&&i.trim().length>0&&(t.current.emit("guess",i.trim()),a(""))},value:i})})]})};n(89);var F=function(e){var t=e.users,n=e.scoredUsers,r=e.word;return Object(j.jsxs)("div",{className:"score-board",children:[Object(j.jsxs)("h3",{className:"scores",children:[" The word was : ",r," "]}),t.map((function(e,t){return function(e,t){var r=n.findIndex((function(t){return t.id===e.id}));return Object(j.jsxs)("div",{className:"score-card",children:[Object(j.jsxs)("h5",{children:[" ",e.username," "]}),Object(j.jsxs)("h5",{style:{color:"green"},children:[" ",-1===r?0:100," "]})]},t)}(e,t)}))]})};n(90);var S=function(e){var t=e.socketRef,n=e.drawerId,c=e.drawing,i=e.setDrawing,a=e.canvasParent,o=e.drawBackground,s=e.drawLine,u=e.clearCanvas,l=e.eraseCanvas,d=e.setCanvas,f=e.editOption,b=e.color,h=(e.time,Object(r.useRef)(null)),O=Object(r.useRef)(f),x=Object(r.useRef)(b),v=void 0;Object(r.useEffect)((function(){var e=h.current,n=e.getContext("2d");if(d(e),a.current){var r=a.current.clientWidth,c=a.current.clientHeight,j=r<c?r:c;e.width=j,e.height=j}o(n,e),t.current.on("draw",(function(t){var r=t.color,c=t.mousedown,i=t.mousemove;s(n,e,r,c,i)})),t.current.on("erase",(function(t){var r=t.mousedown,c=t.mousemove;l(n,e,"white",r,c)})),t.current.on("clear",(function(){u(n,e),i([])})),t.current.on("drawData",(function(e){var t={initial:{x:e.x1,y:e.y1},final:{x:e.x2,y:e.y2},color:e.color};i((function(e){return[].concat(Object(m.a)(e),[t])}))}))}),[]),Object(r.useEffect)((function(){t.current.id===n&&(p(h.current,h.current.getContext("2d")),h.current.style.touchAction="none")}),[n]),Object(r.useEffect)((function(){x.current=b,O.current=f}),[b,f]),Object(r.useEffect)((function(){var e=h.current,t=e.getContext("2d");w(t,e),window.addEventListener("resize",(function(t){if(a.current){var n=a.current.clientWidth,r=a.current.clientHeight,c=n<r?n:r;e.width=c,e.height=c}o(e.getContext("2d"),e),w(e.getContext("2d"),e)}))}),[c]);var w=function(e,t){u(e,t),c.forEach((function(n){var r={x:n.initial.x*t.width,y:n.initial.y*t.height};if(0!==Object.keys(n.final).length){var c={x:n.final.x*t.width,y:n.final.y*t.height};s(e,t,n.color,r,c)}else s(e,t,n.color,r)}))},p=function(e,t){e.addEventListener("pointerdown",(function(e){return y(e,t)})),e.addEventListener("pointermove",(function(e){return g(e,t)})),e.addEventListener("pointerup",(function(e){return C(e,t)})),e.addEventListener("pointerleave",(function(e){return C(e,t)})),e.addEventListener("pointercancel",(function(e){return C(e,t)}))},g=function(e,n){if(v){var r={x:e.offsetX,y:e.offsetY},c=h.current;if("edit"===O.current){var a={initial:{x:v.x/c.width,y:v.y/c.height},final:{x:r.x/c.width,y:r.y/c.height},color:x.current};i((function(e){return[].concat(Object(m.a)(e),[a])})),t.current.emit("drawData",{x1:a.initial.x,y1:a.initial.y,x2:a.final.x,y2:a.final.y,color:x.current})}else{var o={initial:{x:v.x/c.width,y:v.y/c.height},final:{x:r.x/c.width,y:r.y/c.height},color:"white"};i((function(e){return[].concat(Object(m.a)(e),[o])})),t.current.emit("drawData",{x1:o.initial.x,y1:o.initial.y,x2:o.final.x,y2:o.final.y,color:"white"})}v=r}},y=function(e,n){v={x:e.offsetX,y:e.offsetY};var r=h.current;if("edit"===O.current){var c={initial:{x:v.x/r.width,y:v.y/r.height},final:{},color:x.current};i((function(e){return[].concat(Object(m.a)(e),[c])})),t.current.emit("drawData",{x1:c.initial.x,y1:c.initial.y,color:x.current})}else{var a={initial:{x:v.x/r.width,y:v.y/r.height},final:{},color:"white"};i((function(e){return[].concat(Object(m.a)(e),[a])})),t.current.emit("drawData",{x1:a.initial.x,y1:a.initial.y,color:"white"})}},C=function(e,t){v=void 0};return Object(j.jsx)("canvas",{ref:h,id:"canvas",style:{cursor:"url(./Cursor/edit5.svg) 5 5, crosshair"}})},E=(n(91),["#000000","#FFFFFF","#C0C0C0","#808080","#FFA500","#A52A2A","#800000","#008000","#808000","#FF0000","#00FFFF","#0000FF","#0000A0","#ADD8E6","#800080","#FFFF00","#00FF00","#FF00FF"]);var R=function(e){var t=e.color,n=e.options,r=e.editOption,c=e.handleColorChange;return Object(j.jsxs)("div",{className:"options-outer-container",children:[Object(j.jsx)("div",{className:"options-container",children:E.map((function(e,n){return function(e,n){var r="color-box";return e===t&&(r+=" color-box-active"),Object(j.jsx)("button",{onClick:function(){return c(e)},className:r,style:{backgroundColor:"".concat(e)}},n)}(e,n)}))}),Object(j.jsx)("div",{className:"options-container",children:n.map((function(e,t){return function(e,t){var n="option-icon";return e.name===r&&(n+=" option-icon-active"),Object(j.jsx)(w.a,{className:n,icon:e.icon,onClick:e.handler},t)}(e,t)}))})]})},W=function(e,t){e&&(e.fillStyle="white",e.fillRect(0,0,t.width,t.height))},P=function(e,t,n,r,c){e&&(c?(e.beginPath(),e.lineWidth=6,e.lineCap="round",e.lineJoin="round",e.strokeStyle=n,e.moveTo(r.x,r.y),e.lineTo(c.x,c.y),e.stroke(),e.closePath()):(e.fillStyle=n,e.fillRect(r.x-4,r.y-4,6,6)))},D=function(e,t){e&&(e.clearRect(0,0,t.width,t.height),W(e,t),window.sessionStorage.removeItem("drawing"))},I=function(e,t,n,r,c){e&&(c?(e.beginPath(),e.strokeStyle="white",e.lineWidth=10,e.lineCap="round",e.lineJoin="round",e.moveTo(r.x,r.y),e.lineTo(c.x,c.y),e.stroke(),e.closePath()):(e.fillStyle="white",e.fillRect(r.x-5,r.y-5,10,10)),window.sessionStorage.setItem("drawing",t.toDataURL("image/svg")))};var L=function(e){var t=e.socketRef,n=e.wait,c=e.setWait,i=Object(r.useContext)(b),a=Object(o.a)(i,2),s=a[0],u=a[1],l=Object(r.useContext)(O),h=Object(o.a)(l,2),x=h[0],v=(h[1],Object(r.useState)([])),g=Object(o.a)(v,2),N=g[0],L=g[1],A=Object(r.useState)(!1),T=Object(o.a)(A,2),U=T[0],z=T[1],J=Object(r.useState)(""),_=Object(o.a)(J,2),B=_[0],H=_[1],Y=Object(r.useState)([]),G=Object(o.a)(Y,2),K=G[0],X=G[1],M=Object(r.useState)([]),q=Object(o.a)(M,2),Q=q[0],V=q[1],Z=Object(r.useState)("_"),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(r.useState)("-"),re=Object(o.a)(ne,2),ce=re[0],ie=re[1],ae=Object(r.useState)("edit"),oe=Object(o.a)(ae,2),se=oe[0],ue=oe[1],le=Object(r.useState)(null),de=Object(o.a)(le,2),je=de[0],fe=de[1],be=Object(r.useState)(E[0]),he=Object(o.a)(be,2),Oe=he[0],xe=he[1],ve=Object(r.useRef)(null),me=Object(r.useContext)(C),we=Object(o.a)(me,2),pe=(we[0],we[1]);Object(r.useEffect)((function(){t.current.emit("joined",x.username),t.current.on("addUser",(function(e){u((function(t){return[].concat(Object(m.a)(t),[e])}))})),t.current.on("wait",(function(e){c(e)})),t.current.on("updateScore",(function(e){u((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))})),t.current.on("guess",(function(e){pe((function(t){return[].concat(Object(m.a)(t),[e])}))})),t.current.on("chooseWord",(function(e){V(e)})),t.current.on("drawing",(function(e){var t=e.drawing;X(t)})),t.current.on("timer",(function(e){ie(e)})),t.current.on("end",(function(e){z(!0),L(e),X([]),ie("-")})),t.current.on("reset",(function(){u((function(e){return e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{score:0})}))})),ie("-"),pe([])})),t.current.on("drawer",(function(e){var t=e.id,n=e.newWord;H(t),te(n),L([]),z(!1)})),t.current.on("removeUser",(function(e){u((function(t){return t.filter((function(t){return t.id!==e.id}))}))}))}),[]);var ge=function(e){xe(e)},ye=[{name:"edit",icon:p.c,handler:function(){ue("edit")}},{name:"erase",icon:p.b,handler:function(){ue("erase")}},{name:"clear",icon:p.d,handler:function(e){D(je.getContext("2d"),je),X([]),t.current.emit("clear")}}];return n?Object(j.jsx)("div",{className:"outer-container center-wait",children:Object(j.jsx)("h1",{className:"wait",children:"Waiting for users to join"})}):Object(j.jsxs)("div",{className:"outer-container",children:[Object(j.jsx)("nav",{children:Object(j.jsx)(f,{size:"3rem",stroke:"2px",align:"left"})}),Object(j.jsxs)("div",{className:"word-bar",children:[Object(j.jsxs)("h1",{className:"timer",children:[" ",Object(j.jsx)(w.a,{icon:p.a})," ",ce," s "]}),Object(j.jsxs)("h1",{className:"word",children:[" ",t.current.id===B?ee:function(){for(var e=ee.length,t="",n=0;n<e;n++)"-"===ee[n]||" "===ee[n]?t+=ee[n]:t+="_";return"_"===t||""===t?"_":t}()," "]})]}),Object(j.jsxs)("div",{className:"canvas-outer-container",children:[Object(j.jsx)(y,{users:s,user:x,drawerId:B}),Object(j.jsx)("div",{ref:ve,className:"canvas-container",children:3===Q.length?Object(j.jsxs)("div",{className:"word-options-outer-container",children:[Object(j.jsx)("h3",{children:"Choose a word !"}),Object(j.jsx)("div",{className:"word-options-container",children:Q.map((function(e,n){return Object(j.jsxs)("button",{className:"word-option",onClick:function(){return function(e){t.current.emit("chooseWord",e),V([])}(e)},children:[" ",e," "]},n)}))})]}):!1===U?Object(j.jsx)(S,{canvasParent:ve,socketRef:t,drawing:K,setDrawing:X,drawerId:B,drawBackground:W,drawLine:P,clearCanvas:D,eraseCanvas:I,setCanvas:fe,editOption:se,color:Oe,time:ce}):Object(j.jsx)(F,{users:s,scoredUsers:N,word:ee})}),Object(j.jsx)(k,{socketRef:t})]}),t.current.id===B?Object(j.jsx)(R,{options:ye,color:Oe,editOption:se,handleColorChange:ge}):null]})};var A=function(){var e="https://skribbl-cloned.herokuapp.com/",t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],a=Object(r.useState)(!0),s=Object(o.a)(a,2),l=s[0],d=s[1],f=Object(r.useRef)(null);return Object(r.useEffect)((function(){f.current=u()(e,{transports:["websocket"]})}),[e]),Object(j.jsx)(N,{children:Object(j.jsx)("div",{children:c?Object(j.jsx)(L,{socketRef:f,setWait:d,wait:l}):Object(j.jsx)(v,{socketRef:f,wait:l,setGame:i,setWait:d})})})};var T=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(h,{children:Object(j.jsx)(x,{children:Object(j.jsx)(A,{})})})})};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.b683927f.chunk.js.map